print("Part one:", [([([nice_monkeys[nice_monkeys[i][3] * (worry_level % nice_monkeys[i][2] == 0) + nice_monkeys[i][4] * (worry_level % nice_monkeys[i][2] != 0)][0].insert(0, worry_level) for worry_level in [((((nice_monkeys[i][1][0] == "+") and (((nice_monkeys[i][1][1] == "old") and (nice_monkeys[i][0][-1]*2)) or nice_monkeys[i][0][-1] + int(nice_monkeys[i][1][1]))) or ((nice_monkeys[i][1][0] == "*") and (((nice_monkeys[i][1][1] == "old") and (nice_monkeys[i][0][-1]**2)) or nice_monkeys[i][0][-1] * int(nice_monkeys[i][1][1])))) //3)]], nice_monkeys[i][0].pop(), nice_monkeys[i][5].append("Yobama")) for _ in range(20) for i in range(len(nice_monkeys)) for _ in range(len(nice_monkeys[i][0]))], (sorted([len(inspections) for _, _, _, _, _, inspections in nice_monkeys])[-2] * sorted([len(inspections) for _, _, _, _, _, inspections in nice_monkeys])[-1]))[-1] for nice_monkeys in [[[list(map(int, (monkey[1][17:]).strip().split(", ")))[::-1], monkey[2][23:].split(), int(monkey[3].strip().split()[-1]), int(monkey[4].strip().split()[-1]), int(monkey[5].strip().split()[-1]), []] for monkey in [row.split("\n") for row in open("input.txt", "r").read().split("\n\n")]]]][0])
print("Part two:", [([([nice_monkeys[nice_monkeys[i][3] * (worry_level % nice_monkeys[i][2] == 0) + nice_monkeys[i][4] * (worry_level % nice_monkeys[i][2] != 0)][0].insert(0, worry_level) for worry_level in [((((nice_monkeys[i][1][0] == "+") and (((nice_monkeys[i][1][1] == "old") and (nice_monkeys[i][0][-1]*2)) or nice_monkeys[i][0][-1] + int(nice_monkeys[i][1][1]))) or ((nice_monkeys[i][1][0] == "*") and (((nice_monkeys[i][1][1] == "old") and (nice_monkeys[i][0][-1]**2)) or nice_monkeys[i][0][-1] * int(nice_monkeys[i][1][1])))) % all_tests_multiplied[-1])]], nice_monkeys[i][0].pop(), nice_monkeys[i][5].append("Yobama")) for _ in range(10000) for i in range(len(nice_monkeys)) for _ in range(len(nice_monkeys[i][0]))], (sorted([len(inspections) for _, _, _, _, _, inspections in nice_monkeys])[-2] * sorted([len(inspections) for _, _, _, _, _, inspections in nice_monkeys])[-1]))[-1] for nice_monkeys, all_tests_multiplied in [([[list(map(int, (monkey[1][17:]).strip().split(", ")))[::-1], monkey[2][23:].split(), int(monkey[3].strip().split()[-1]), int(monkey[4].strip().split()[-1]), int(monkey[5].strip().split()[-1]), []] for monkey in [row.split("\n") for row in open("input.txt", "r").read().split("\n\n")]], [([all_tests_multiplied.append(int(monkeyy[3].strip().split()[-1]) * all_tests_multiplied[-1]) for monkeyy in [row.split("\n") for row in open("input.txt", "r").read().split("\n\n")]], all_tests_multiplied)[1] for all_tests_multiplied in [[1]]][0])]][0])